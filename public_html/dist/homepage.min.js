var BoojScrollHomePage=function(){this.win=$(window),this.win_width=this.win.width(),this.win_height=this.win.height(),this.body=$("body"),this.html=$("html"),this.ipadFix=$("#ipadNavHack"),this.header=$("#scrolling-header"),this.home_block=$("#home-section"),this.offsets=[],this.threshold=481,this.heightThreshold=725,this.doScroll=!0,this.init()};BoojScrollHomePage.prototype={init:function(){var e=this;this.home_block.css({height:this.win_height-30}),(this.win_width<this.threshold||this.win_height<this.heightThreshold)&&this.nav_to_top(),this.get_blocks(),this.getNavClicks(),this.win.on("scroll",function(){e.doScroll&&e.win_width>e.threshold?e.win.scrollTop()>e.win_height-150?e.nav_to_top():e.nav_to_bottom():e.nav_to_top(),e.set_active(e.win.scrollTop())}),this.win.resize(function(){e.win_height=e.win.height(),e.win_width=e.win.width(),e.home_block.css({height:e.win_height-30}),e.get_blocks(),e.win_width<e.threshold||e.win_height<e.heightThreshold?(e.doScroll=!1,e.nav_to_top()):e.doScroll=!0})},nav_to_top:function(){this.header.css({position:"fixed",bottom:"auto",top:"0"})},nav_to_bottom:function(){this.win_height<this.heightThreshold?this.nav_to_top():this.header.css({position:"absolute",bottom:"0",top:"auto"})},get_blocks:function(){var e=this;$(".scrolling-pages-section").each(function(){var t=$(this);e.offsets.push({top:t.offset().top,rel:t.attr("id")})}),this.offsets.reverse()},set_active:function(e){e+=250,this.header.find(".active").removeClass("active");for(var t in this.offsets)if(this.offsets.hasOwnProperty(t)&&e>=this.offsets[t].top){this.header.find('a[data-target="#'+this.offsets[t].rel+'"]').parent().addClass("active");break}},getNavClicks:function(){var e=this;this.header.find("a.click-to-section").on("click",function(t){t.preventDefault();var n=$($(t.currentTarget).data("target"));n.length&&(e.ipadFix.length&&e.ipadFix.css("height","200px"),$("html, body").animate({scrollTop:n.offset().top-94},500,function(){e.ipadFix.length&&e.ipadFix.css("height","0px")}))})}};var BoojQuestions=function(){this.wrap=$("#booj-questions-container"),this.win=$(window),this.template=$("#questions-template"),this.questions=booj_questions||[],this.currQ=0,this.ipadFix=$("#ipadNavHack");var e=this;this.template.length&&this.questions.length&&setTimeout(function(){e.init()},500)};BoojQuestions.prototype={init:function(){var e=this;this.template=this.template.html(),this.wrap.on("click","a",function(t){t.preventDefault();var n=$(this);n.hasClass("yes")?e.scrollToSection(n.data("target")):e.nextQuestion()}),this.render(this.currQ)},nextQuestion:function(){this.currQ+=1;if(this.currQ>this.questions.length||!this.questions[this.currQ])this.currQ=0;this.render(this.currQ)},render:function(e){var t=this,n=this.questions[e],r=Mustache.render(this.template,n),i=this.wrap.children(),s=$("<div></div>").html(r),o=s.find(".booj-question");i.length?i.animate({left:this.win.width()*2,opacity:0},500,function(){o.css({left:t.win.width()*2*-1,opacity:0}),t.wrap.html(o),o.animate({left:0,opacity:1},500)}):(o.css({left:t.win.width()*2*-1,opacity:0}),t.wrap.html(o),o.animate({left:0,opacity:1},500))},scrollToSection:function(e){var t=this,n=$(e);n.length&&(this.ipadFix.length&&this.ipadFix.css("height","200px"),$("html, body").animate({scrollTop:n.offset().top-94},500,function(){t.ipadFix.length&&t.ipadFix.css("height","0px")}))}};var BoojTeams=function(){this.container=$("#teams-section"),this.currBio=null,this.template=$("#booj-team-template"),this.template.length&&this.init()};BoojTeams.prototype={init:function(){var e=this;this.template=this.template.html(),this.container.on("click",'a[data-action="open-bio"]',function(t){t.preventDefault();var n=$(this),r=n.data();r.target!==e.currBio&&(e.currBio=r.target,e.closeBios(),e.renderBio({video:r.youtube,name:n.text(),bio:n.parents(".teams-block").find(".team-bio").html(),row:n.parents(".row-fluid")}))}),this.container.on("click","a.close-bio",function(t){e.currBio=null,t.preventDefault(),e.closeBios()})},closeBios:function(){this.container.find(".team-bio-info").slideUp("fast",function(){$(this).remove()})},renderBio:function(e){var t,n,r,i;n=Mustache.render(this.template,e),r=$("<div></div>").html(n),i=r.find(".team-bio-info").hide(),e.row.after(i),i.slideDown("fast")}},$(function(){var e=new BoojScrollHomePage,t=$("#jcarousel1"),n=$("#jcarousel2"),r=new BoojQuestions,i=new BoojTeams;t.jcarousel({animation:"slow",wrap:"circular"}),t.parent().find(t.data("next")).on("click",function(e){e.preventDefault(),t.jcarousel("scroll","-=1")}),t.parent().find(t.data("prev")).on("click",function(e){e.preventDefault(),t.jcarousel("scroll","+=1")}),n.jcarousel({animation:"slow"}),n.parent().find(t.data("next")).on("click",function(e){e.preventDefault(),n.jcarousel("scroll","-=5")}),n.parent().find(t.data("prev")).on("click",function(e){e.preventDefault(),n.jcarousel("scroll","+=5")}),$("#myCarousel").carousel({interval:4e3})});